<!DOCTYPE html>
<html>
<head>
	<title>GPT-3 API Call</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0">
</head>

<style>
body {
    background-color: #343541; 
}
</style>

<body>
<center>
	<h1 style="color:white;font-family:arial">OpenAI API Call (GPT-3)</h1>
	<label style="color:white;font-family:arial" for="apiKey">API KEY</label>
	<br>
	<input style="color:white;background-color:#22222b;border:1px solid white;font-family:arial" type="password" id="apiKey" name="apiKey" size="60">
	<br><br>
	<label style="color:white;font-family:arial" for="promptText">PROMPT</label>
	<br>
	<textarea style="color:white;background-color:#22222b;border:1px solid white;font-family:arial;font-size:95%" id="promptText" name="promptText" rows="8" cols="54"></textarea>
	<br><br>
	<label style="color:white;font-family:arial" onclick="alert('Temperature controls the level of randomness or creativity in the generated text. Higher temperatures result in more diverse and unpredictable output. Conversely, lower temperatures result in more conservative and predictable output. For example, a high temperature value can be used to generate text that is more different from the prompt, while a low temperature value can be used to generate text that is more similar to the prompt. This can be useful in situations where the goal is to generate text that is similar to a given input, but with some level of variation or creativity. Temperature can also be used to control the level of coherence and fluency in the generated text.')">TEMPERATURE (between 0 and 1, click here for details)</label>
	<br><br>
	<input style="color:white;background-color:#22222b;border:1px solid white;font-family:arial;text-align:center;font-size:105%" type="text" id="temperatureText" name="temperatureText" size="4" value="0.9">
	<br><br>
	<button style="color:white;background-color:#22222b;border:1px solid white;font-family:arial;font-size:120%;text-align:center;height:40px;width:180px" onclick="generateResponse()">SEND CALL</button>
	<br><br>
	<label style="color:white;font-family:arial" id="StatusLabel"></label>
	<br>
	<textarea style="color:white;background-color:#22222b;border:1px solid white;font-family:arial" id="responseText" name="responseText" readonly rows="24" cols="120"></textarea>
	<br><br>
	<button style="color:white;background-color:#22222b;border:1px solid white;font-family:arial;font-size:120%;text-align:center;height:40px;width:180px" onclick="copyToClip()">COPY</button>
	<script>
		function generateResponse() {
			document.getElementById("responseText").value = "";
			
			let startTime = new Date();
			var apiKey = document.getElementById("apiKey").value;
			var promptText = document.getElementById("promptText").value;
			var temperatureText = document.getElementById("temperatureText").value;
			var FloatTemperature = parseFloat(temperatureText)
			
			document.getElementById('StatusLabel').innerHTML = 'Generation in progress with '+FloatTemperature+' temperature...';
			
					$.ajax({ 
			url: 'https://api.openai.com/v1/completions',
			type: 'POST',
			headers: {
				'Content-Type': 'application/json',
				'Authorization': 'Bearer ' + apiKey
			},
			data: JSON.stringify({
				"model": "text-davinci-003",
				"prompt": promptText,
				"max_tokens": 4000,
				"temperature": FloatTemperature
			}),
			success: function (response) {
				var generatedText = response.choices[0].text;
				document.getElementById("responseText").value = generatedText;
				let endTime = new Date();
				let timeElapsed = endTime - startTime;
				document.getElementById('StatusLabel').innerHTML = 'Generation completed in '+timeElapsed+' ms.';
			},
			error: function (jqXHR, textStatus, errorThrown) {
				alert('Error! Server too busy or wrong values provided.');
				document.getElementById('StatusLabel').innerHTML = ' ';
			}
		});
		apiKey = null;
		
	}
	
		function copyToClip() {
		var copyText = document.getElementById("responseText");
		copyText.select();
		copyText.setSelectionRange(0, 999999); // For mobile devices
		navigator.clipboard.writeText(copyText.value);
		var promptTextFocus = document.getElementById("promptText");
		promptTextFocus.focus();
		}
</script>

</center>
</body>
</html>